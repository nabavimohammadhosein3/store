{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- other -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="{% static 'templates/master.css' %}">
  </head>
  <body class="">
      <header>
        {% include "upper_nav.html" %}
      </header>
      <main class="w-100 d-flex justify-content-center align-items-center flex-column px-3" style="padding-top: 70px;">
        <div class="m-3 border border-2 rounded-3 w-100 h-100" style="border-color: lightgray;">
          <nav class="">
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
              <button class="nav-link active" id="acc-tab" data-bs-toggle="tab" data-bs-target="#acc" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Account</button>
              <button class="nav-link" id="pending-tab" data-bs-toggle="tab" data-bs-target="#pending" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">pending products</button>
              <button class="nav-link" id="paid-tab" data-bs-toggle="tab" data-bs-target="#paid" type="button" role="tab" aria-controls="nav-contact" aria-selected="false">paid products</button>
            </div>
          </nav>
          <div class="tab-content m-3" id="nav-tabContent">
            <div class="tab-pane fade show active" id="acc" role="tabpanel" aria-labelledby="acc-tab">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <img class="rounded-pill" src="{% static '../media/' %}{{account.avatar}}" alt="" style="width: 100px; height: 100px;">
                  <span class="m-2 fs-4">welcome <b>{{account.username}}</b></span>
                </div>
                <button class="btn btn-danger" id="logout">logout</button>
              </div>
              <form class="p-5" method="post" action="/account/" enctype='multipart/form-data'>
                {% csrf_token %}
                {% for field in form %}
                  <div class="form-group">
                    {{ field.label_tag }} {{ field }}
                    {% if field.errors %}
                      <div class="invalid-feedback">
                        {% for error in field.errors %}
                          {{ error }}
                        {% endfor %}
                      </div>
                    {% endif %}
                  </div>
                {% endfor %}
                <button type="submit" class="btn btn-primary">save</button>
            </form>
            </div>
            <div class="tab-pane fade text-center" id="pending" role="tabpanel" aria-labelledby="pending-tab">
              <div class="pend">
                <div class="d-flex flex-wrap justify-content-center">
                {% for b in buy reversed%}
                {% if not b.is_purchase %}
                <div id={{b.id}} class="card p-0 border-2 d-block" style="width: 200px; border-color: lightseagreen; cursor: default;">
                  <img src="{% static '../media/' %}{{b.product.avatar.first}}"
                  class="card-img-top" alt="..." style="height: 200px; cursor: pointer;" onclick="window.location.href='/product/{{b.product.pk}}'">
                  <div class="card-body border-1"
                  style="background-color: lightblue; border-color: lightseagreen; border-bottom-style: solid; border-top-style: solid;">
                    <h6 class="card-title w-auto"><span class="fs-6">{{b.product.master_price}} R
                    </span>{% if b.product.off != 0 %}<span class="badge bg-danger fs-6 rounded-pill float-end p-1">{{b.product.off}}%</span>{% endif %}</h6>
                  </div>
                  <div class="card-footer">
                    <small class="text-secondary">{{b.product.created_time.date}}</small>
                  </div>
                  <div class="card-footer p-0">
                    <button cid={{b.id}} class="btn btn-danger">cancle</button>
                  </div>
                </div>
              {% endif %}
              {% endfor %}
                </div>
              <button class="btn btn-primary m-3" id="purchase">purchase</button>
              </div>
            </div>
            <div class="tab-pane fade text-center" id="paid" role="tabpanel" aria-labelledby="paid-tab">
              <div class="paid d-flex flex-wrap justify-content-center">
              {% for b in buy reversed%}
              {% if b.is_purchase %}
              <div class="card p-0 border-2" onclick="window.location.href='/product/{{b.product.pk}}'" style="width: 200px; border-color: lightseagreen; cursor: pointer;">
                <img src="{% static '../media/' %}{{b.product.avatar.first}}" class="card-img-top" alt="..." style="height: 200px;">
                <div class="card-body border-1"
                style="background-color: lightblue; border-color: lightseagreen; border-bottom-style: solid; border-top-style: solid;">
                  <h6 class="card-title w-auto"><span class="fs-6">{{b.product.master_price}} R
                  </span>{% if b.product.off != 0 %}<span class="badge bg-danger fs-6 rounded-pill float-end p-1">{{b.product.off}}%</span>{% endif %}</h6>
                </div>
                <div class="card-footer">
                  <small class="text-secondary">{{b.product.created_time.date}}</small>
                </div>
              </div> 
              {% endif %}
              {% endfor %}
              </div>
            </div>
          </div>
        </div>
      </main>
      <footer></footer>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="{% static 'templates/account/account.js' %}"></script>
    <script src="{% static 'templates/products/search.js' %}"></script>
  </body>
</html>
